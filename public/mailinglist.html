<!DOCTYPE html>
<html lang="en">
<head>
  <script type="text/javascript" src="/client.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/2.3.1/jsencrypt.min.js"></script>
  <script type="text/javascript">
  function go() {
    var decrypt = new JSEncrypt();
    decrypt.setPrivateKey(document.getElementById('privkey').value);

    jindo.events
       .filter(e => e.type === 'subscribe')
       .map(e => decrypt.decrypt(e.email))
       .scan((list, e) => list.concat(e), [])
       .subscribe(
          list => document.getElementById('output').textContent =
             list.map(JSON.stringify).join("\n")
      );
  }
  </script>

</head>
<body>
  <p>
    Paste private key here
  </p>
  <textarea id='privkey'>
  </textarea>
  <button onClick="go()">go</button>

  <pre id="output">
  </pre>
</body>
